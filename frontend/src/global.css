:root {
  /* 色板 */
  --bg: #f6f7fb;
  --panel: #ffffff;
  --text: #111111;
  --muted: #6b7280;
  --border: #e5e7eb;
  --primary: #000000;
  --primary-hover: #111111;
  --ring: rgba(0, 0, 0, 0.12);

  /* 圆角与阴影 */
  --radius: 10px;
  --radius-lg: 18px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.04);
  --shadow-md: 0 6px 20px rgba(0,0,0,.06);
  --shadow-lg: 0 12px 32px rgba(0,0,0,.08);

  /* 间距 */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
}

/* 全局排版与背景 */
html, body {
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
}

/* 平滑滚动条（现代浏览器） */
* {
  scrollbar-color: #cfd3da transparent;
  scrollbar-width: thin;
}
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-thumb { background: #cfd3da; border-radius: 8px; }
*::-webkit-scrollbar-track { background: transparent; }

/* 通用容器 */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-5);
}

/* 用户中心栅格：移动端单列，桌面双列 */
.user-center-grid {
  display: grid;
  grid-template-columns: 1fr; /* 默认单列（移动端） */
  gap: var(--space-6);
}
@media (min-width: 992px) { /* lg 断点及以上 */
  .user-center-grid {
    grid-template-columns: 1fr 1fr; /* 桌面双列 */
  }
}

/* 回退：移除用户中心面板与 Tabs 强制宽度规则，恢复默认行为 */

/* 用户中心列表卡片悬浮仅在桌面启用，移动端保持初始样式 */
.card-hover { }
@media (min-width: 992px) {
  .card-hover {
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px;
    transition: background .2s ease, box-shadow .2s ease;
    box-shadow: var(--shadow-sm);
  }
  .card-hover:hover {
    background: #fafafa;
    box-shadow: var(--shadow-md);
  }
}

/* Ant Design 主题微调：按钮、输入、选择器、卡片、头部等 */
.ant-layout {
  background: var(--bg);
}
.ant-layout-header {
  background: var(--panel) !important;
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
}
.ant-layout-sider {
  background: #f7f7f8 !important;
  border-right: 1px solid var(--border);
}

/* Content 容器内的卡片化效果 */
.ant-layout-content {
  background: var(--panel);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
}

/* 按钮 */
.ant-btn {
  border-radius: var(--radius-lg);
  padding: 0 14px;
  height: 36px;
}
.ant-btn-default {
  background: #fff;
  border-color: var(--border);
}
.ant-btn-default:not(:disabled):hover {
  border-color: #d1d5db;
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
}
.ant-btn-primary {
  background: var(--primary);
  border-color: var(--primary);
}
.ant-btn-primary:not(:disabled):hover {
  background: var(--primary-hover);
  border-color: var(--primary-hover);
}

/* 输入与选择器 */
.ant-input, .ant-input-affix-wrapper, .ant-input-search, .ant-input-password, .ant-textarea {
  border-radius: var(--radius);
}
.ant-input, .ant-input-affix-wrapper, .ant-input-password {
  border-color: var(--border);
}
.ant-input:focus, .ant-input-affix-wrapper-focused, .ant-input-affix-wrapper:focus, .ant-input-password:focus-within {
  box-shadow: 0 0 0 3px var(--ring);
}
.ant-select-selector {
  border-radius: var(--radius) !important;
  border-color: var(--border) !important;
}
.ant-select-focused .ant-select-selector {
  box-shadow: 0 0 0 3px var(--ring) !important;
}

/* 卡片与列表 */
.ant-card, .ant-list, .ant-modal-content {
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
}

/* 富文本（帖子正文等） */
.post-content {
  color: var(--text);
  font-size: 16px;
  line-height: 1.85;
}
.post-content h1, .post-content h2, .post-content h3,
.post-content h4, .post-content h5, .post-content h6 {
  color: var(--text);
  margin: 1.2em 0 .6em;
  line-height: 1.25;
}
.post-content p { margin: .8em 0; }
.post-content ul, .post-content ol { margin: .8em 0 .8em 1.2em; }
.post-content li { margin: .25em 0; }
.post-content a { color: var(--primary); text-decoration: underline; }
.post-content img { max-width: 100%; border-radius: 8px; }
.post-content blockquote {
  margin: 1em 0;
  padding: .6em 1em;
  background: #fafafa;
  border-left: 4px solid var(--border);
  border-radius: 6px;
}
.post-content pre {
  background: #0f1115;
  color: #e5e7eb;
  padding: 12px 14px;
  border-radius: 8px;
  overflow: auto;
}
.post-content code { 
  background: #f5f5f7; 
  padding: 2px 6px; 
  border-radius: 6px; 
}

/* 气泡（聊天） */
.bubble {
  padding: 10px 14px;
  border-radius: 14px;
  max-width: 72%;
  word-break: break-word;
  overflow-x: auto;
}
.bubble--user {
  background: #111;
  color: #fff;
}
.bubble--ai {
  background: #f5f5f7;
  color: #111;
  border: 1px solid var(--border);
}
.bubble--error {
  background: #ffebee;
  color: #c62828;
  border: 1px solid #ffcdd2;
}

:where(.ant-btn) {
  -webkit-user-select: none;
  user-select: none;
}

/* 全局样式 - 防止水平滚动 */
* {
  box-sizing: border-box;
}

html, body {
  overflow-x: hidden;
  width: 100%;
  margin: 0;
  padding: 0;
}

/* 移动端响应式样式 */
@media (max-width: 768px) {
  /* 隐藏侧边栏，通过汉堡菜单控制 */
  .ant-layout-sider {
    position: fixed !important;
    left: -260px !important;
    top: 0 !important;
    bottom: 0 !important;
    height: 100vh !important;
    z-index: 1000 !important;
    transition: left 0.3s ease !important;
  }

  .ant-layout-sider.mobile-sider-open {
    left: 0 !important;
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15) !important;
  }

  /* 遮罩层 */
  .mobile-sider-mask {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.45);
    z-index: 999;
    display: none;
  }

  .mobile-sider-mask.visible {
    display: block;
  }

  /* 调整主内容区域，不留边距给侧边栏 */
  .ant-layout-has-sider > .ant-layout,
  .ant-layout.ant-layout-has-sider > .ant-layout {
    margin-left: 0 !important;
    width: 100% !important;
  }

  /* 确保主布局占满全宽 */
  .ant-layout-has-sider {
    flex-direction: row !important;
  }

  /* 主Layout容器 */
  .ant-layout {
    width: 100vw !important;
  }

  /* 内部Layout（包含Header和Content） */
  .ant-layout-has-sider > .ant-layout {
    flex: 1 !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Header 样式调整 */
  .ant-layout-header {
    padding: 0 12px !important;
  }

  /* Header 中的用户信息简化显示 */
  .header-user-email {
    display: none !important;
  }

  /* 按钮文字在小屏幕上隐藏 */
  .logout-btn-text {
    display: none !important;
  }

  /* Content 区域边距调整 */
  .ant-layout-content {
    margin: 12px !important;
    padding: 12px !important;
    height: calc(100vh - 64px - 24px) !important;
    width: 100% !important;
    max-width: 100vw !important;
    box-sizing: border-box !important;
  }

  /* 模型选择器在移动端调整为垂直布局 */
  .model-selector-space {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 12px !important;
  }

  .model-selector-space .ant-select,
  .model-selector-space .ant-btn {
    width: 100% !important;
  }

  /* 聊天历史记录调整 */
  .chat-history-container {
    max-height: calc(100vh - 240px) !important;
  }

  /* 显示汉堡菜单按钮 */
  .mobile-menu-btn {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Header 标题字体调整 */
  .ant-layout-header > div > div {
    font-size: 16px !important;
  }

  /* 通知铃铛保持可见 */
  .ant-badge {
    margin-right: 8px;
  }

  /* 头像大小调整 */
  .ant-avatar {
    width: 36px !important;
    height: 36px !important;
  }

  /* 按钮间距调整 */
  .ant-space-item {
    margin-right: 8px !important;
  }

  /* Modal 在移动端的优化 */
  .ant-modal {
    max-width: calc(100vw - 32px) !important;
    margin: 16px auto !important;
  }

  .ant-modal-body {
    padding: 16px !important;
  }

  /* Select 组件在移动端全宽 */
  .ant-select-dropdown {
    max-width: calc(100vw - 32px);
  }

  /* 表单项间距调整 */
  .ant-form-item {
    margin-bottom: 16px !important;
  }

  /* 按钮组在移动端堆叠 */
  .ant-radio-group {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
  }

  .ant-radio-button-wrapper {
    width: 100% !important;
    text-align: center !important;
  }

  /* 强制登录/注册按钮显示 */
  .ant-space {
    gap: 8px !important;
  }

  /* 确保按钮文字在移动端完全隐藏 */
  .ant-btn > span:not(.anticon) {
    display: inline !important;
  }

  /* 页面内容宽度调整 */
  body {
    overflow-x: hidden;
  }

  /* Space组件间距 */
  .ant-space-horizontal {
    gap: 8px !important;
  }

  /* Chat页面优化 */
  .ant-layout-content > div {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* 标题和模式信息区域 */
  .ant-layout-content h2 {
    font-size: 18px !important;
  }

  /* 消息容器 */
  .ant-layout-content > div > div:last-child {
    padding: 8px !important;
  }

  /* 输入框区域 */
  .ant-input-search {
    width: 100% !important;
  }

  /* 图片预览 */
  .ant-image {
    max-width: 100% !important;
  }

  /* 帖子正文在移动端的阅读优化 */
  .post-content img { max-width: 100%; height: auto; margin: 8px 0; }
  .post-content pre { font-size: 13px; padding: 10px 12px; }
  .post-content code { font-size: 13px; }
  .post-content h1, .post-content h2 { margin: 1em 0 .5em; }
}
